
<!--本模板根据学员生成一个panel-accordion 元素,用于表示学员参加过那些培训班(显示培训班的阶段名,而非培训班级名)-->
<%
    tc_type_names = student.training_classes.map{|tc| tc.training_class_type}

    count = TrainingClassType.toefl_types.count{|toefl_type| tc_type_names.count(toefl_type) > 0 }+
         TrainingClassType.sat_types.count{|sat_type| tc_type_names.count(sat_type) > 0 }
%>

 <div class="panel-group panel-accordion dark-accordion" id="accordion<%=student.id%>">
   <div class="panel panel-default">
     <div class="panel-heading">
       <h4>
         <a class="collapsed " data-toggle="collapse" data-parent="#accordion<%=student.id%>" href="#collapseOne<%=student.id%>">
           已参加班级: &nbsp;&nbsp;&nbsp;&nbsp;<%= count %>
         </a>
       </h4>
     </div>
     <div id="collapseOne<%=student.id%>" class="panel-collapse collapse">
       <div class="panel-body">

         <% TrainingClassType.send(:toefl_types).map do |toefl_type| %>

             <%if tc_type_names.count(toefl_type) > 0 %>
                 <i class="green checkmark icon"></i>
                 <label class="ui green label">
                   <%=toefl_type %>
                 </label>
             <% else %>
                 <%=toefl_type %>
             <% end %>
             <br>
         <%end%>
         <% TrainingClassType.send(:sat_types).map do |sat_type| %>
             <% if tc_type_names.count(sat_type) > 0 %>
                 <i class="green checkmark icon"></i>
                 <label class="ui green label">
                   <%= sat_type %>
                 </label>
             <% else %>
                 <%= sat_type %>
             <% end %>
             <br>
         <%end%>
       </div>
     </div>
   </div>

 </div>
